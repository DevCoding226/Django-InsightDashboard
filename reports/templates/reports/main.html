{% extends "base.html" %}



{% block content %}
<div class="report">
  <div id="chartjs-tooltip">
    <table></table>
  </div>
  <h1 class="survey-overview-title">
    SURVEY OVERVIEW - {% if country %}{{ country.name | upper }}{% else %}EUROPE{% endif %}
  </h1>
  <div class="survey-cards">
    <div class="row equal-heights">
      <div class="col-md-3 col-sm-6">
        <div class="report-card report-card-red">
          <div class="report-card-head">
            <div class="title">SURVEYS</div>
            <div class="head-delim"></div>
            <div class="surveys-total report-card-text-lg">
              {{ survey_stat.total }}
            </div>
          </div>
          <div class="report-card-body">
            <div class="report-card-text-lg">
              {% if survey_stat.last %}
                <div class="report-card-text-lesser left-1">{{ survey_stat.last|time:"H:i" }} CET</div>
                {{ survey_stat.last|date:"d b o" | upper}}
              {% endif %}

            </div>
            <div class="report-card-text">
              Total number of surveys and time of the latest survey
            </div>
          </div>
        </div>
      </div>

      {% for org_stat in organization_stat %}
      <div class="col-md-3 col-sm-6">
        <div class="report-card report-card-gray">
          <div class="report-card-head">
            <div class="title">{{ org_stat.organization.name_plural | upper }}</div>
            <div class="head-delim"></div>
          </div>
          <div class="report-card-body">
            <div class="report-card-text-lg">
              {{ org_stat.total }}
            </div>
            <div class="report-card-text">
              {{ org_stat.organization.label1 }}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}

    </div>
  </div>

  {% for qs in question_stat %}
    {% if qs.vars and qs.vars.available %}
      {% include qs.get_template_name with stat=qs i=forloop.counter %}
    {% else %}
      <div class="question-container question-n-a">
        <div class="question-title">
          <div class="question-title-number">Question {{ forloop.counter }}:</div>
          <div>{{ qs.vars.question_text }}</div>
        </div>
        <div class="row equal-heights">
          <div class="col-sm-12 col-md-6">
            <div class="report-card chart-card pie-card report-card-red">
              No data available
            </div>
          </div>
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>
{% endblock content %}
